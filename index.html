<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Lofi Hub</title>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/favicon/site.webmanifest">
    <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="assets/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#2b5797">
    <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Description -->
    <meta name="description"
        content="Welcome to the Lofi Hub! Stream infinite, non-stop lofi beats for studying, focus, and relaxation. The best chill music radio 24/7.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap" rel="stylesheet">

    <!-- Scripts -->
    <script src="script.js" defer></script>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>


    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P8KD0TW6V3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-P8KD0TW6V3');
    </script>

</head>

<body>
    <header>
        <h1 id="top-title">Lofi Hub</h1>
        <div class="header-btns" id="header-btns">
            <button id="fullscreen-btn" onclick="openFullscreen()">
                <img id="fullscreen-icon" src="assets/fullScreen.png" alt="Fullscreen Icon">
            </button>
            <button onclick="openTwitter()">
                <img id="twitter-icon" src="assets/twitterLogo.png" alt="Twitter Icon">
            </button>
            <button onclick="openGitHub()">
                <img id="GitHub-icon" src="assets/GitHubLogo.png" alt="GitHub Icon">
            </button>
            <button onclick="togglePomodoro()">
                <img src="assets/clockLogo.png" alt="Clock Icon">
            </button>
            <button onclick="toggleTodo()">
                <img src="assets/todoLogo.png" alt="To-Do Icon">
            </button>
            <button onclick="openAbout()" class="about-desktop">
                <img src="assets/heart.png" alt="Heart Icon">
            </button>
            <button onclick="toggleVideoCall()" id="video-call-btn" title="Invite Study Partner">
                <img src="assets/videoCall.png" alt="Video Call Icon">
            </button>
        </div>
        <button id="hamburger-menu" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div id="about-popup" class="popup about-desktop" style="display:none;">
            <div class="popup-content">
                <h2>About Lofi Hub</h2>
                <p>Lofi Hub is a web application that combines a YouTube music player with a Pomodoro timer and a to-do
                    list to help you stay focused and productive.</p>
                <p style="margin-bottom:4px;">Features:</p>
                <ul style="margin-bottom:4px;">
                    <li>Play relaxing lofi music from YouTube</li>
                    <li>Pomodoro timer to manage work and break intervals</li>
                    <li>To-do list to keep track of tasks</li>
                </ul>
                <p style="margin-bottom:4px;">Shortcuts:</p>
                <ul style="margin-bottom:4px;">
                    <li><b>G</b>: Shuffle GIF</li>
                    <li><b>Space bar</b>:Pause/play music</li>
                    <li><b>Clock[C/P]</b>: Pomodoro timer</li>
                    <li><b>Todo[T]</b>: Show/hide todo list</li>
                    <li><b>Volume/Mute[M]</b>: Adjust/mute sound</li>
                </ul>
                <p style="font-size:0.85em;margin:0;">By <a href="https://github.com/Swaraj-Singh-30/Lofi-Hub"
                        target="_blank" style="color:#ffb86c;">Swaraj Singh</a></p>
            </div>
        </div>
    </header>

    <div id="overlay">
        <h2>Press any key or click to start ðŸŽµ</h2>
    </div>

    <div id="player-wrapper" style="display:none;">
        <img id="lofi-gif"
            src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExZm4yb2VrYTR1bndzZXptMTFpYnoyYndyMmQwdmhnNzBpaGpkY2M5ZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/h58dtf5vTpjulO4M5o/giphy.gif"
            alt="Lofi GIF">
        <div id="player"></div>
        <h3 id="player-title">
            <div class="marquee">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </h3>
    </div>

    <div id="pomodoro-clock">
        <div id="pomodoro-timer">25:00</div>
        <div id="pomodoro-controls">
            <button id="pomodoro-start">Start</button>
            <button id="pomodoro-reset">Reset</button>
            <div id="pomodoro-options" style="display: none;">
                <button id="pomodoro-continue">Continue</button>
                <button id="pomodoro-stop">Stop</button>
            </div>
        </div>
    </div>
    <audio id="pomodoro-alarm" src="assets/alarm.mp3" preload="auto"></audio>

    <div id="todo-list">
        <div class="todo-wrapper">
            <h3>Todo-List</h3>
            <div class="input-container">
                <input type="text" id="new-task-input" placeholder="Add a new task...">
                <button id="add-task-btn" onclick="addTask()">Add</button>
            </div>
            <ul id="task-list"></ul>
        </div>
    </div>

    <div id="video-call-popup" style="display:none;">
        <div class="video-header">
            <h3>Study Together</h3>
            <button onclick="toggleVideoCall()" class="close-video-btn" title="Minimize">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <div class="meeting-info">
                <div class="code-display">
                    <span class="label">Your Code:</span>
                    <span id="my-peer-id">Generating...</span>
                    <button onclick="copyPeerId()" title="Copy Code">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>
                </div>
                <div class="join-input-group">
                    <input type="text" id="remote-peer-id" placeholder="Enter code to join">
                    <button onclick="connectToPeer()" title="Join">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" y1="12" x2="3" y2="12"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="call-status">Ready to connect</div>
        </div>

        <div class="video-grid">
            <div class="video-card local">
                <video id="local-video" autoplay muted playsinline></video>
                <div class="video-badge">You</div>
            </div>
            <div class="video-card remote">
                <video id="remote-video" autoplay playsinline></video>
                <div class="video-badge">Peer</div>
            </div>
        </div>

        <div class="control-bar">
            <button onclick="toggleAudio()" id="btn-toggle-audio" class="control-btn" title="Toggle Mic">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                    <line x1="12" y1="19" x2="12" y2="23"></line>
                    <line x1="8" y1="23" x2="16" y2="23"></line>
                </svg>
            </button>
            <button onclick="toggleVideo()" id="btn-toggle-video" class="control-btn" title="Toggle Camera">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M23 7l-7 5 7 5V7z"></path>
                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                </svg>
            </button>
            <button onclick="endCall()" id="btn-end-call" class="control-btn end-call" title="End Call">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91">
                    </path>
                    <line x1="23" y1="1" x2="1" y2="23"></line>
                </svg>
            </button>
        </div>

        <!-- Call Ended Screen -->
        <div id="call-ended-screen" style="display: none;">
            <h2>Call Ended</h2>
            <p>Hope you had a productive session! ðŸš€</p>
            <div class="ended-actions">
                <button onclick="shareOnTwitter()" class="social-btn twitter">
                    <img src="assets/twitterLogo.png" alt="Twitter">
                    Share on Twitter
                </button>
                <button onclick="starOnGitHub()" class="social-btn github">
                    <img src="assets/GitHubLogo.png" alt="GitHub">
                    Star on GitHub
                </button>
            </div>
            <button onclick="resetVideoUI()" class="back-btn">Back to Camera</button>
        </div>
    </div>

    <button onclick="togglePlay()" id="play-pause-btn">
        <img id="pause-btn" src="assets/pause.png" alt="Pause Icon">
    </button>

    <div class="volume-control">
        <input type="range" id="volume-slider" min="0" max="100" step="1" value="50">
    </div>
    <!-- issue -->
    <button onclick="toggleMute()" id="mute-btn">
        <img id="volume-icon" src="assets/volumeIcon.png" alt="Volume Icon">
    </button>
    <button onclick="shuffleTrack()" id="shuffle-btn">
        <img id="shuffle-icon" src="assets/shuffleIcon.png" alt="Shuffle Icon">
    </button>

    <!-- Custom Toast Notification -->
    <div id="toast-notification" class="toast">
        <span id="toast-message">Notification</span>
    </div>

    <!-- Incoming Call Modal -->
    <div id="incoming-call-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Incoming Video Call</h3>
            <p>Someone wants to study with you!</p>
            <div class="modal-actions">
                <button id="btn-decline-call" class="modal-btn decline">Decline</button>
                <button id="btn-accept-call" class="modal-btn accept">Accept</button>
            </div>
        </div>
    </div>

</body>

</html>